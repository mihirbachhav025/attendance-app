<%- include("partials/header"); -%>

  <div class="wrapper d-flex align-items-stretch" isClosed=true>
    <nav id="sidebar" class="inactive">
      <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="btn btn-primary">
          <i class="fa fa-bars"></i>
          <span class="sr-only">Toggle Menu</span>
        </button>
      </div>
      <div class="p-4">
        <h1><a href="/api/v1/admin/home" class="logo">Terna</a></h1>
        <ul class="list-unstyled components mb-5">
          <li>
            <a href="/api/v1/admin/home"><span class="fa fa-home mr-3"></span> Home</a>
          </li>
          <li>
            <a href="/api/v1/admin/editStudents"><span class="fa fa-user mr-3"></span> Edit Students</a>
          </li>
          <li>
            <a href="/api/v1/admin/editTeachers"><span class="fa fa-user mr-3"></span> Edit Teachers</a>
          </li>
          <li>
            <a href="/api/v1/admin/editTimetable"><span class="fa fa-sticky-note mr-3"></span> Edit Timetable</a>
          </li>
          <li>
            <a href="/api/v1/admin/contact"><span class="fa fa-paper-plane mr-3"></span> Contact</a>
          </li>
        </ul>

        <!-- <div class="mb-5">
						<h3 class="h6 mb-3">Subscribe for newsletter</h3>
						<form action="#" class="subscribe-form">
	            <div class="form-group d-flex">
	            	<div class="icon"><span class="icon-paper-plane"></span></div>
	              <input type="text" class="form-control" placeholder="Enter Email Address">
	            </div>
	          </form>
					</div> -->

        <div class="footer">
          <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;
            <script>document.write(new Date().getFullYear());</script> All rights reserved | </a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
          </p>
        </div>

      </div>
    </nav>

    <!-- Page Content  -->
    <div id="content" class="p-4 p-md-5 pt-5">
      <h2 class="mb-4">Edit Student Details</h2>

      <div>
        <form id="searchForm" class="example" action="/api/v1/admin/searchStudents" method="post">
          <input type="text" placeholder="Search by Student ID..." name="search">
          <button id="searchbutton" form="searchForm" type="submit"><i class="fa fa-search"></i></button>
        </form>
      </div>
      <form action="/api/v1/admin/saveStudentDetails" method="post" id="saveStudentDetails">
        <div>


          <table class="table">
            <thead>
              <tr>
                <th>StudID </th>
                <th>Firstname</th>
                <th>Lastname</th>
                <th>Birthdate</th>
                <th>Division
                  <form action="/api/v1/admin/searchStudents/division" method="post" id="form38">
                    <!-- <select name="divisionselect" id="divisionselect" form="form38">
                      <option value="A"></option>
                      <option value="A">A</option>
                      <option value="B">B</option>
                    </select> -->
                  </form>
                </th>
                <th>Roll No.</th>
                <th>Sem <form action="/api/v1/admin/searchStudents/sem" method="post" id="semForm">
                    <select name="sem" id="sem" form="semForm">
                      <option value="8"></option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                    </select>
                  </form>
                </th>
                <th>Branch <form action="/api/v1/admin/searchStudents/branch" method="post" id="branchForm">
                    <select name="branch" id="branch" form="branchForm">
                      <option value="Computer Science"></option>
                      <option value="Computer Science">Comps</option>
                      <option value="Information Technology">IT</option>
                    </select>
                  </form>

              </tr>
            </thead>
            <tbody>
              <% if(data.length){ for(var i=0; i< data.length; i++) {%>
                <tr>
                  <th scope="row">
                    <%= data[i].StudID %>
                  </th>

                  <td> <input name="firstname" type="text" class="form-control" <%=readonly %> value="<%=
                      data[i].Firstname%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="lastname" type="text" class="form-control" <%=readonly %> value="<%=
                      data[i].Lastname%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="birthdate" type="text" class="form-control" <%=readonly %> value="<%=
                      data[i].Birthdate%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="division" type="text" class="form-control" <%=readonly %> value="<%=
                      data[i].Division%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="rollno" type="text" class="form-control" <%=readonly %> value="<%= data[i].RollNo%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="sem" type="text" class="form-control" <%=readonly %> value="<%= data[i].Sem%>"
                      style="border: none; border-color: transparent;"> </input></td>

                  <td><input name="branch" branch type="text" class="form-control" <%=readonly %> value="<%=
                      data[i].Cname%>"
                      style="border: none; border-color: transparent;"> </input></td>




                  <% } %>
                    <form action="/api/v1/admin/editStudentDetails/edit" method="post" id="editStudentDetails">
                      <button type="submit" class="btn btn-link btn-lg" form="editStudentDetails">
                        <span class="glyphicon glyphicon-edit"></span> Edit
                      </button>
                    </form>

                    <form action="/api/v1/admin/addStudentDetails" method="post" id="addStudentDetails">
                      <button type="submit" class="btn btn-link btn-lg" form="addStudentDetails">
                        <span class="glyphicon glyphicon-edit"></span> Add
                      </button>
                    </form>

                    <form action="/api/v1/admin/deleteStudentDetails" method="post" id="deleteStudentDetails"
                      data-="hello">
                      <button type="submit" class="btn btn-link btn-lg" form="deleteStudentDetails">
                        <span class="glyphicon glyphicon-edit"></span> Delete
                      </button>
                    </form>

                    <button type="submit" form="saveStudentDetails" style="font-size:24px" <%=disabled %> >
                      <i class="fa fa-save"></i></button>
                    <% }else{ %>
                      <form action="/api/v1/admin/editStudentDetails/edit" method="post" id="editStudentDetails">
                        <button type="submit" class="btn btn-link btn-lg" form="editStudentDetails">
                          <span class="glyphicon glyphicon-edit"></span> Edit
                        </button>
                      </form>

                      <form action="/api/v1/admin/addStudentDetails" method="post" id="addStudentDetails">
                        <button type="submit" class="btn btn-link btn-lg" form="addStudentDetails">
                          <span class="glyphicon glyphicon-edit"></span> Add
                        </button>
                      </form>

                      <form action="/api/v1/admin/deleteStudentDetails" method="post" id="deleteStudentDetails"
                        data-="hello">
                        <button type="submit" class="btn btn-link btn-lg" form="deleteStudentDetails">
                          <span class="glyphicon glyphicon-edit"></span> Delete
                        </button>
                      </form>

                      <button type="submit" form="saveStudentDetails" style="font-size:24px" <%=disabled %> >
                        <i class="fa fa-save"></i></button>
                </tr>

                <tr>
                  <td>
                    <%= content %>
                  </td>
                </tr>
                <% } %>
            </tbody>
          </table>
          <!-- <p id="demo"></p> -->
          <!-- <%= JSON.stringify(data) %> -->
        </div>
      </form>
    </div>
  </div>




  <script>
    // const divDrop = document.getElementById("divisionselect");
    // divDrop.addEventListener("change", function () {
    //   document.getElementById("form38").submit();
    // });

    const semDrop = document.getElementById("sem");
    semDrop.addEventListener("change", function () {
      document.getElementById("semForm").submit();
    });

    const branchDrop = document.getElementById("branch");
    branchDrop.addEventListener("change", function () {
      document.getElementById("branchForm").submit();
    });
  </script>


  <%- include("partials/footer"); -%>